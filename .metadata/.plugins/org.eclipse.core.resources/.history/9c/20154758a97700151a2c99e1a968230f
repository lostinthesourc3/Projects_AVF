var read = function(){
	var db = Ti.Database.open("stockDB");
	db.execute("CREATE TABLE IF NOT EXISTS stockTBL (id INTEGER PRIMARY KEY, name TEXT, phone TEXT, address TEXT, crossStreet TEXT)");
	var dbResult = db.execute("SELECT * FROM stockTBL");
	var info = [];	
		while (dbResult.isValidRow()){
		var localData = {
			name: dbResult.fieldByName("name"),
			phone: dbResult.fieldByName("phone"),
			address: dbResult.fieldByName("address"),
			crossStreet: dbResult.fieldByName("crossStreet"),
		};
		dbResult.next();
	}

	dbResult.close();
	db.close();
	console.log(localData);
	var ui = require("ui");
	ui.buildUI(info);
};

var save = function(savedData){
	console.log(savedData);
	var db = Ti.Database.open("stockDB");
	db.execute("CREATE TABLE IF NOT EXISTS stockTBL (id INTEGER PRIMARY KEY, name TEXT, phone TEXT, address TEXT, crossStreet TEXT)");
	db.execute("DELETE FROM stockTBL");
	for(n in savedData){
		db.execute("INSERT INTO stockTBL (name, phone, address, crossStreet) VALUES (?, ?, ?, ?)", savedData[n].name, savedData[n].phone, savedData[n].address, savedData[n].crossStreet);
	};	
	
	db.close();
	read(); 
};

exports.save = save;
//exports.read = read;
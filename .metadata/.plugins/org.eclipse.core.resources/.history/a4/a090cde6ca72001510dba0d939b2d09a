
var getGeo = function(){
	console.log("getGeo");
	
	if (Ti.Platform.osname === "android"){
		var lat = 37.78583526611328;
		var lng = -122.4064178466797;
		var loc = lat + "," + lng;
		exports.loc = loc;
		var api = require("api");
		api.getData(lat, lng);
		
	}else{ 
		if(Ti.Geolocation.locationServicesEnabled){
			Ti.Geolocation.purpose = "Get current location";
			Ti.Geolocation.accuracy = Ti.Geolocation.ACCURACY_BEST;
			Ti.Geolocation.distaceFilter = 10;
			Titanium.Geolocation.getCurrentPosition(function(e){
				if(e.error){
					alert("Enable location services" + e.error);
				}else{
					Ti.API.info(e.coords);
					console.log(e.coords);
					var lat = e.coords.latitude;
					var lng = e.coords.longitude;
					var loc = lat + "," + lng;
					exports.loc = loc;
					var api = require("api");
					api.getData(loc);
				}
			});
		}	
	};
}; 
exports.getGeo = getGeo;

// var moon = "http://api.wunderground.com/api/d1e578e5aa05dc1d/astronomy/q"+lat+","+lng+".json";// astronomy 
// if (Ti.Network.online) {
     // var getDataM = Ti.Network.createHTTPClient();
     // getDataM.onload = function(e){
          // console.log(e);  //this is the raw data-string returned from the URL request
          // var moonArray = JSON.parse(this.responseText);  //convert the string to JS object notation
          // var moonInfo = {
          	  // illum: moonArray.moon_phase.percentIlluminated,
          	  // age: moonArray.moon_phase.ageOfMoon,
          	  // phase: moonArray.moon_phase.phaseOfMoon,
          	  // hemi: moonArray.moon_phase.hemisphere,
          // };				          
          // var ui = require("ui");
		  // console.log(moonInfo);	
          // ui.moonUI(moonInfo);
     // }; //getDataA.onload closing 
     // getDataM.open("GET", moon);
     // getDataM.send();
// } else {
     // alert("Network currently unavailable.");
     // timeout: 5000;
     // // load locally stored data perhaps?
// }; // if else Ti.Network closing		








